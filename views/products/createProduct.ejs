<%- include('../partials/head') %>
<%- include('../partials/header') %>

<main>
  <section class="container">
    <h1>Crear nuevo producto</h1>

    <% if (typeof errors !== 'undefined' && errors.length > 0) { %>
    <ul class="form-errors">
      <% errors.forEach(error => { %>
      <li><%= error.msg %></li>
      <% }) %>
    </ul>
    <% } %>

    <form action="/products" method="POST" enctype="multipart/form-data">

      <!-- Nombre -->
      <div class="form-group">
        <label for="name">Nombre:</label>
        <input type="text" id="name" name="name" placeholder="Nombre del producto" required />
        <span class="error-message" id="nameError"></span>
      </div>

      <!-- Descripción -->
      <div class="form-group">
        <label for="description">Descripción:</label>
        <textarea id="description" name="description" placeholder="Descripción del producto" required></textarea>
        <span class="error-message" id="descriptionError"></span>
      </div>

      <!-- Imagen -->
      <div class="form-group">
        <label for="image">Imagen del producto:</label>
        <input type="file" id="image" name="image" accept="image/*" />
        <span class="error-message" id="imageError"></span>
      </div>

      <!-- Categoría -->
      <div class="form-group">
        <label for="category">Categoría:</label>
        <select id="category" name="category" required>
          <option value="" disabled selected>Seleccione una categoría</option>
          <% categories.forEach(cat => { %>
          <option value="<%= cat.productCategoryId %>"><%= cat.name %></option>
          <% }) %>
        </select>
        <span class="error-message" id="categoryError"></span>
      </div>

      <!-- Color -->
      <div class="form-group">
        <label for="colors">Color:</label>
        <select id="colors" name="colors" required>
          <option value="" disabled selected>Seleccione un color</option>
          <% colors.forEach(color => { %>
          <option value="<%= color.productColorId %>"><%= color.name %></option>
          <% }) %>
        </select>
        <span class="error-message" id="colorsError"></span>
      </div>

      <!-- Precio -->
      <div class="form-group">
        <label for="price">Precio:</label>
        <input type="number" step="0.01" name="price" id="price" placeholder="Precio" required />
        <span class="error-message" id="priceError"></span>
      </div>

      <!-- Precio promocional -->
      <div class="form-group">
        <label for="promotionalPrice">Precio promocional:</label>
        <input type="number" step="0.01" name="promotionalPrice" id="promotionalPrice" placeholder="Precio promocional" />
        <span class="error-message" id="promotionalPriceError"></span>
      </div>

      <!-- Stock -->
      <div class="form-group">
        <label for="stock">Stock disponible:</label>
        <input type="number" name="stock" id="stock" placeholder="Stock disponible" required />
        <span class="error-message" id="stockError"></span>
      </div>

      <button type="submit">Crear producto</button>
    </form>
  </section>
</main>

<%- include('../partials/footer') %>

<script src="https://cdn.jsdelivr.net/npm/validator@13.9.0/validator.min.js"></script>
<script src="/assets_front/js/validateCreateProduct.js"></script>